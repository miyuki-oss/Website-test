<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HealthHub â€” Safe Sex Info & Community</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ea66c9 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    /* Header */
    header {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    nav {
      max-width: 1400px;
      margin: 0 auto;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 24px;
      font-weight: 700;
      color: #e675dc;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      cursor: pointer;
      transition: color 0.3s ease, transform 0.3s ease;
    }

    .nav-links a:hover {
      color: #667eea;
      transform: translateY(-2px);
    }

    /* Main container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    /* Sections */
    section {
      display: none;
      animation: fadeIn 0.4s ease-in-out;
    }

    section.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
      color: white;
      padding: 60px 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 40px;
    }

    .hero h1 {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .hero p {
      font-size: 18px;
      opacity: 0.95;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Info cards */
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 24px rgba(102, 126, 234, 0.15);
    }

    .card h3 {
      color: #ea66c9;
      margin-bottom: 12px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .card p {
      color: #666;
      line-height: 1.6;
    }

    /* Modal styles */
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      animation: fadeIn 0.3s ease;
      transition: background 0.3s ease;
    }

    .modal-backdrop.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal {
      background: white;
      border-radius: 12px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideUp 0.3s ease;
      transition: all 0.3s ease;
    }

    .modal:hover {
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.25);
    }

    @keyframes slideUp {
      from { 
        transform: translateY(30px); 
        opacity: 0; 
      }
      to { 
        transform: translateY(0); 
        opacity: 1; 
      }
    }

    .modal-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 12px;
    }

    .modal-header h2 {
      color: #f183c3;
      margin: 0;
      flex: 1;
      font-size: 24px;
    }

    .modal-header button {
      background: none;
      border: none;
      color: #999;
      font-size: 24px;
      cursor: pointer;
      transition: color 0.3s;
    }

    .modal-header button:hover {
      color: #333;
    }

    .modal-content {
      color: #555;
      line-height: 1.7;
    }

    .modal-content h3 {
      color: #667eea;
      margin-top: 16px;
      margin-bottom: 8px;
      font-size: 16px;
    }

    .modal-content p {
      margin-bottom: 12px;
    }

    .modal-content ul {
      margin-left: 20px;
      margin-bottom: 12px;
    }

    .modal-content li {
      margin-bottom: 8px;
    }

    /* Forum */
    .forum {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .top-post {
      background: linear-gradient(90deg, #fff7e6, #fff3f0);
      border: 1px solid #ffe9b3;
      padding: 14px;
      border-radius: 10px;
      margin-bottom: 16px;
      display: none;
    }

    .top-post .title {
      font-weight: 700;
      color: #cc6600;
      margin-bottom: 8px;
    }

    .top-post .top-card {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
    }

    .top-post .top-card .tp-content {
      color: #333;
      flex: 1;
      margin-right: 12px;
      white-space: pre-wrap;
    }

    .top-post .top-card .tp-meta {
      text-align: right;
      color: #666;
      font-size: 13px;
    }

    .forum h2 {
      color: #667eea;
      margin-bottom: 24px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .forum-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 2px solid #f0f0f0;
    }

    .form-row {
      display: flex;
      gap: 12px;
    }

    input[type="text"],
    textarea {
      flex: 1;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-danger {
      background: #ff6b6b;
      color: white;
    }

    .btn-danger:hover {
      background: #ff5252;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 107, 107, 0.3);
    }

    .btn-danger:active {
      transform: translateY(0);
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 13px;
    }

    /* Posts */
    .posts {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .post {
      background: #f9f9f9;
      padding: 16px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
      transition: all 0.3s ease;
      animation: slideIn 0.3s ease-out;
    }

    .post:hover {
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
      transform: translateX(4px);
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .post-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .post-author {
      font-weight: 600;
      color: #333;
    }

    .post-time {
      font-size: 13px;
      color: #999;
    }

    .post-content {
      color: #555;
      line-height: 1.5;
      white-space: pre-wrap;
      margin-bottom: 12px;
    }

    .post-actions {
      display: flex;
      gap: 8px;
    }

    .post-action-btn {
      background: none;
      border: 1px solid #e0e0e0;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      color: #667eea;
      font-size: 13px;
      transition: all 0.3s;
    }

    .post-action-btn:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    /* Chat panel */
    .chat-panel {
      position: fixed;
      right: 24px;
      bottom: 80px;
      width: 360px;
      max-height: 70vh;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 9999;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      animation: slideInChat 0.4s ease-out;
    }

    @keyframes slideInChat {
      from {
        transform: translateY(400px) scale(0.9);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .chat-panel.hidden {
      transform: translateY(400px) scale(0.9);
      opacity: 0;
      pointer-events: none;
    }

    .message {
      max-width: 85%;
      padding: 10px 14px;
      border-radius: 10px;
      line-height: 1.3;
      font-size: 14px;
      animation: messageAppear 0.3s ease-out;
    }

    @keyframes messageAppear {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .chat-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
    }

    .chat-header .title {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .chat-body {
      flex: 1;
      overflow: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      max-width: 85%;
      padding: 10px 14px;
      border-radius: 10px;
      line-height: 1.3;
      font-size: 14px;
    }

    .message.bot {
      background: #f0f0f0;
      color: #333;
      align-self: flex-start;
    }

    .message.user {
      background: #667eea;
      color: white;
      align-self: flex-end;
    }

    .quick-replies {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 12px;
    }

    .quick-replies button {
      background: none;
      border: 1px solid #e0e0e0;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      color: #667eea;
      font-size: 13px;
      transition: all 0.3s;
      text-align: left;
    }

    .quick-replies button:hover {
      background: #f0f0f0;
      border-color: #667eea;
    }

    .chat-input {
      display: flex;
      gap: 8px;
      padding: 12px;
      border-top: 1px solid #e0e0e0;
      background: #f9f9f9;
    }

    .chat-input input {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      font-size: 14px;
    }

    .chat-input input:focus {
      outline: none;
      border-color: #667eea;
    }

    .chat-input .send-btn {
      padding: 10px 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }

    .chat-input .send-btn:hover {
      background: #5568d3;
    }

    /* Chat bubble */
    .chat-bubble {
      position: fixed;
      right: 24px;
      bottom: 24px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9998;
      transition: all 0.3s ease;
    }

    .chat-bubble:hover {
      transform: scale(1.15) rotate(10deg);
      box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);
    }

    .chat-bubble:active {
      transform: scale(0.95);
    }

    /* Checklist */
    .checklist {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .checklist h2 {
      color: #667eea;
      margin-bottom: 24px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .checklist-group {
      margin-bottom: 24px;
    }

    .checklist-group h3 {
      color: #333;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .checklist-items {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .checklist-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .checklist-item:hover {
      background: #f0f0f0;
    }

    .checklist-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #667eea;
    }

    .checklist-item label {
      flex: 1;
      cursor: pointer;
      color: #555;
    }

    .checklist-item input[type="checkbox"]:checked + label {
      color: #999;
      text-decoration: line-through;
    }

    /* Assessment form styles */
    .assessment-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 30px;
    }

    .assessment-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .assessment-card:hover {
      border-color: #667eea;
      box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
      transform: translateY(-8px);
    }

    .assessment-card:active {
      transform: translateY(-2px);
    }

    .assessment-card i {
      font-size: 32px;
      color: #667eea;
      margin-bottom: 12px;
      display: block;
    }

    .assessment-card h3 {
      color: #333;
      margin: 0 0 8px 0;
      font-size: 16px;
    }

    .assessment-card p {
      color: #999;
      font-size: 13px;
      margin: 0;
    }

    .assessment-form {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      display: none;
      animation: fadeInScale 0.4s ease-out;
    }

    .assessment-form.active {
      display: block;
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .question-group {
      background: #f9f9f9;
      padding: 16px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
      transition: all 0.3s ease;
    }

    .question-group:hover {
      background: #f5f5f5;
      border-left-color: #c457d3;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
    }

    .submit-assessment {
      background: #ec83d5;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .submit-assessment:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
    }

    .submit-assessment:active {
      transform: translateY(0);
    }

    .cancel-assessment {
      background: #f0f0f0;
      color: #333;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .cancel-assessment:hover {
      background: #e0e0e0;
      transform: translateY(-2px);
    }

    .cancel-assessment:active {
      transform: translateY(0);
    }

    /* Assessment result styles */
    .assessment-result {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      display: none;
      text-align: center;
    }

    .assessment-result.show {
      display: block;
      animation: resultSlideIn 0.5s ease-out;
    }

    @keyframes resultSlideIn {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .result-icon {
      font-size: 64px;
      margin-bottom: 16px;
      display: block;
      animation: iconBounce 0.6s ease-out;
    }

    @keyframes iconBounce {
      0% {
        transform: scale(0) rotate(-20deg);
        opacity: 0;
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1) rotate(0);
        opacity: 1;
      }
    }

    .result-icon.safe {
      color: #27ae60;
    }

    .result-icon.warning {
      color: #f39c12;
    }

    .result-icon.danger {
      color: #e74c3c;
    }

    .result-title {
      color: #333;
      font-size: 28px;
      margin-bottom: 12px;
      animation: slideInLeft 0.5s ease-out 0.1s both;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .result-message {
      color: #666;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 24px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      animation: slideInRight 0.5s ease-out 0.2s both;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .result-recommendations {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 24px;
      text-align: left;
      animation: fadeInUp 0.5s ease-out 0.3s both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-recommendations h3 {
      color: #667eea;
      margin-top: 0;
    }

    .result-recommendations ul {
      margin-left: 20px;
    }

    .result-recommendations li {
      margin-bottom: 8px;
      color: #555;
      transition: all 0.3s ease;
    }

    .result-recommendations li:hover {
      color: #667eea;
      transform: translateX(4px);
    }

    .result-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      animation: fadeInUp 0.5s ease-out 0.4s both;
    }

    .result-actions button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .result-actions .btn-primary {
      background: #667eea;
      color: white;
    }

    .result-actions .btn-primary:hover {
      background: #5568d3;
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
    }

    .result-actions .btn-primary:active {
      transform: translateY(-1px);
    }

    .result-actions .btn-secondary {
      background: #f0f0f0;
      color: #333;
    }

    .result-actions .btn-secondary:hover {
      background: #e0e0e0;
      transform: translateY(-3px);
    }

    .result-actions .btn-secondary:active {
      transform: translateY(-1px);
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #999;
    }

    .empty-state i {
      font-size: 48px;
      color: #ddd;
      margin-bottom: 16px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .nav-links {
        gap: 10px;
        font-size: 14px;
      }

      .hero h1 {
        font-size: 32px;
      }

      .chat-panel {
        width: calc(100% - 48px);
        right: 24px;
      }

      .form-row {
        flex-direction: column;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav>
      <div class="logo">
        <i class="fas fa-heart"></i>
        <span>HealthHub</span>
      </div>
      <ul class="nav-links">
        <li><a onclick="showSection('home')">Home</a></li>
        <li><a onclick="showSection('info')">Info</a></li>
        <li><a onclick="showSection('checklist')">Self-Assessment</a></li>
        <li><a onclick="showSection('forum')">Forum</a></li>
      </ul>
    </nav>
  </header>

  <!-- Main Content -->
  <div class="container">
    <!-- Home Section -->
    <section id="home" class="active">
      <div class="hero">
        <h1>Welcome to HealthHub</h1>
        <p>Your trusted resource for safe sex education, health information, and community support.</p>
      </div>

      <div class="info-grid">
        <div class="card">
          <h3><i class="fas fa-book"></i> Learn</h3>
          <p>Comprehensive guides on safe sex practices, contraception, and sexual health.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-comments"></i> Connect</h3>
          <p>Join our community forum to share experiences and get advice from others.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-check-circle"></i> Assess</h3>
          <p>Use our self-assessment tools to track your health and wellness journey.</p>
        </div>
      </div>
    </section>

    <!-- Info Section -->
    <section id="info">
      <div class="info-grid">
        <div class="card">
          <h3><i class="fas fa-condom"></i> Safe Sex Practices</h3>
          <p>Use condoms consistently, get regular STI testing, communicate with partners, and choose contraception that works for you.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-pills"></i> Contraception Options</h3>
          <p>Explore pills, IUDs, implants, injections, condoms, and other methods. Talk to a clinician to find what suits your needs.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-virus"></i> STI Prevention & Testing</h3>
          <p>Regular testing is important. Know your status. Many STIs are treatable. Visit a clinic for confidential testing.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-hospital-alt"></i> Finding Clinics</h3>
          <p>Locate nearby sexual health clinics and healthcare providers. Many offer confidential and affordable services.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-heart"></i> Mental Health</h3>
          <p>Sexual health includes emotional well-being. Seek support if needed. Therapy and counseling are valuable resources.</p>
        </div>
        <div class="card">
          <h3><i class="fas fa-gavel"></i> Rights & Privacy</h3>
          <p>You have the right to confidential care, informed consent, and access to healthcare without discrimination.</p>
        </div>
      </div>
    </section>

    <!-- Self-Assessment Checklists -->
    <section id="checklist">
      <div class="checklist">
        <h2><i class="fas fa-clipboard"></i> Self-Assessment Forms</h2>
        <p style="color: #666; margin-bottom: 24px;">Select a form to assess your health. Based on your answers, we'll provide recommendations.</p>

        <!-- Assessment Selector -->
        <div class="assessment-selector" id="assessmentSelector">
          <div class="assessment-card" data-form="general-health">
            <i class="fas fa-heart"></i>
            <h3>General Health</h3>
            <p>Check your overall wellness</p>
          </div>
          <div class="assessment-card" data-form="sti-symptoms">
            <i class="fas fa-virus"></i>
            <h3>STI Symptoms</h3>
            <p>Screen for STI signs</p>
          </div>
          <div class="assessment-card" data-form="contraception">
            <i class="fas fa-pills"></i>
            <h3>Contraception</h3>
            <p>Review your protection</p>
          </div>
          <div class="assessment-card" data-form="mental-health">
            <i class="fas fa-brain"></i>
            <h3>Mental Health</h3>
            <p>Check emotional wellness</p>
          </div>
          <div class="assessment-card" data-form="reproductive">
            <i class="fas fa-female"></i>
            <h3>Reproductive Health</h3>
            <p>Assess reproductive wellness</p>
          </div>
          <div class="assessment-card" data-form="emergency">
            <i class="fas fa-exclamation-circle"></i>
            <h3>Emergency Check</h3>
            <p>Urgent symptom screening</p>
          </div>
        </div>

        <!-- Assessment Forms -->
        <div id="assessmentFormsContainer"></div>

        <!-- Assessment Result -->
        <div class="assessment-result" id="assessmentResult">
          <i class="result-icon" id="resultIcon"></i>
          <h2 class="result-title" id="resultTitle"></h2>
          <div class="result-message" id="resultMessage"></div>
          <div class="result-recommendations" id="resultRecommendations" style="display: none;"></div>
          <div class="result-actions">
            <button class="btn-secondary" onclick="resetAssessment()">Take Another Assessment</button>
            <button class="btn-primary" onclick="goToForum()">Discuss in Forum</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Forum Section -->
    <section id="forum">
      <div class="forum">
        <h2><i class="fas fa-comments"></i> Community Forum</h2>
        <form class="forum-form" id="postForm">
          <div class="form-row">
            <input type="text" id="authorInput" placeholder="Your name (optional)" maxlength="60" />
          </div>
          <textarea id="messageInput" placeholder="Share your story, ask a question, or offer advice..." maxlength="2000"></textarea>
          <div class="form-row">
            <button type="submit" class="btn btn-primary">Post</button>
            <button type="button" class="btn btn-danger" id="clearAllBtn">Clear All Posts</button>
          </div>
        </form>

        <!-- Top (Most Liked) Post banner -->
        <div id="topPost" class="top-post" aria-live="polite"></div>

        <div class="posts" id="postsContainer">
          <div class="empty-state">
            <i class="fas fa-comments"></i>
            <p>No posts yet â€” be the first to share!</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Chat Panel -->
  <section class="chat-panel hidden" id="chatPanel">
    <div class="chat-header">
      <div class="title">
        <i class="fas fa-robot"></i>
        HealthBot
      </div>
      <button id="minimizeChat" class="btn-small" style="background: none; border: none; color: white; cursor: pointer;">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="chat-body">
      <div id="chatMessages"></div>
      <div class="quick-replies" id="quickReplies"></div>
    </div>
    <div class="chat-input">
      <input id="chatInput" placeholder="Ask a question..." autocomplete="off" />
      <button id="sendBtn" class="send-btn">Send</button>
    </div>
  </section>

  <!-- Chat Bubble -->
  <button id="chatBubble" class="chat-bubble">
    <i class="fas fa-comment"></i>
  </button>

  <!-- Modal for Info Details -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" id="infoModal">
      <div class="modal-header">
        <h2 id="modalTitle"></h2>
        <button id="closeModalBtn"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-content" id="modalContent"></div>
    </div>
  </div>

  <script>
    // ============ ASSESSMENTS ============
    const assessmentData = {
      'general-health': {
        title: 'General Health Assessment',
        icon: 'fas fa-heart',
        questions: [
          { id: 'sleep', label: 'How many hours do you sleep per night?', options: ['Less than 6', '6-7 hours', '7-9 hours', '9+ hours'], scores: [0, 1, 2, 2] },
          { id: 'exercise', label: 'How often do you exercise?', options: ['Never', 'Once a month', '1-2 times per week', '3+ times per week'], scores: [0, 1, 2, 2] },
          { id: 'diet', label: 'How balanced is your diet?', options: ['Very poor', 'Poor', 'Good', 'Excellent'], scores: [0, 1, 2, 2] },
          { id: 'water', label: 'How much water do you drink daily?', options: ['Less than 4 glasses', '4-6 glasses', '6-8 glasses', '8+ glasses'], scores: [0, 1, 2, 2] },
          { id: 'stress', label: 'How stressed do you feel?', options: ['Very stressed', 'Moderately stressed', 'Mildly stressed', 'Not stressed'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'Great Health!', message: 'Your health habits are excellent. Keep up the good work!' };
          if (percentage >= 60) return { status: 'safe', title: 'Good Health', message: 'Your health is good. Try to improve a few areas.' };
          if (percentage >= 40) return { status: 'warning', title: 'Health Needs Attention', message: 'Consider improving your health habits. Speak to a doctor for guidance.' };
          return { status: 'danger', title: 'Urgent Health Concern', message: 'Your health needs immediate attention. Please see a healthcare provider soon.' };
        }
      },
      'sti-symptoms': {
        title: 'STI Symptom Screening',
        icon: 'fas fa-virus',
        questions: [
          { id: 'discharge', label: 'Do you have unusual discharge?', options: ['Yes, severe', 'Yes, mild', 'No', 'Not applicable'], scores: [0, 1, 2, 2] },
          { id: 'pain', label: 'Do you have pain during urination?', options: ['Yes, severe', 'Yes, mild', 'No', 'Not sure'], scores: [0, 1, 2, 1] },
          { id: 'sores', label: 'Do you have genital sores or bumps?', options: ['Yes, many', 'Yes, a few', 'No', 'Not sure'], scores: [0, 1, 2, 1] },
          { id: 'pelvic', label: 'Do you have pelvic or lower abdominal pain?', options: ['Yes, severe', 'Yes, mild', 'No', 'Not sure'], scores: [0, 1, 2, 1] },
          { id: 'tested', label: 'When was your last STI test?', options: ['Never tested', 'Over 2 years ago', 'Within 1-2 years', 'Within 6 months'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'No STI Symptoms', message: 'Based on your answers, you show no obvious STI symptoms. Maintain safe sex practices and get tested regularly.' };
          if (percentage >= 60) return { status: 'warning', title: 'Possible Symptoms', message: 'You may have some symptoms. Get tested at a clinic to be sure. STIs are treatable with early detection.' };
          if (percentage >= 40) return { status: 'warning', title: 'STI Testing Recommended', message: 'You should get tested for STIs. Visit a clinic or sexual health center for confidential testing.' };
          return { status: 'danger', title: 'URGENT: See a Doctor', message: 'Your symptoms suggest you need immediate medical attention. Visit an emergency room or urgent care clinic TODAY.' };
        }
      },
      'contraception': {
        title: 'Contraception Assessment',
        icon: 'fas fa-pills',
        questions: [
          { id: 'method', label: 'Are you using any contraception?', options: ['No', 'Sometimes', 'Consistently', 'Multiple methods'], scores: [0, 1, 2, 2] },
          { id: 'condoms', label: 'Do you use condoms?', options: ['Never', 'Sometimes', 'Usually', 'Always'], scores: [0, 1, 2, 2] },
          { id: 'partner', label: 'Have you discussed contraception with your partner(s)?', options: ['No', 'Briefly', 'Yes, thoroughly', 'Not applicable'], scores: [0, 1, 2, 2] },
          { id: 'backup', label: 'Do you have backup contraception available?', options: ['No', 'Sometimes', 'Yes', 'Not applicable'], scores: [0, 1, 2, 2] },
          { id: 'satisfaction', label: 'Are you satisfied with your contraception?', options: ['Very unsatisfied', 'Unsatisfied', 'Satisfied', 'Very satisfied / N/A'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'Excellent Contraception Plan', message: 'You have a solid contraception strategy. Continue your current practices.' };
          if (percentage >= 60) return { status: 'safe', title: 'Good Contraception Coverage', message: 'Your contraception is adequate. Consider adding backup methods or discussing options with a clinician.' };
          if (percentage >= 40) return { status: 'warning', title: 'Contraception Needs Review', message: 'Your contraception coverage could be improved. Talk to a clinician about better options.' };
          return { status: 'danger', title: 'Urgent: Get Contraception', message: 'You are not adequately protected. Visit a clinic immediately to start contraception.' };
        }
      },
      'mental-health': {
        title: 'Mental Health Check',
        icon: 'fas fa-brain',
        questions: [
          { id: 'mood', label: 'How is your overall mood?', options: ['Very depressed', 'Somewhat depressed', 'Neutral/OK', 'Good/Happy'], scores: [0, 1, 2, 2] },
          { id: 'anxiety', label: 'How much anxiety do you experience?', options: ['Severe', 'Moderate', 'Mild', 'None'], scores: [0, 1, 2, 2] },
          { id: 'sleep_quality', label: 'How is your sleep quality?', options: ['Very poor', 'Poor', 'Good', 'Excellent'], scores: [0, 1, 2, 2] },
          { id: 'relationships', label: 'How are your relationships?', options: ['Very strained', 'Strained', 'OK', 'Healthy'], scores: [0, 1, 2, 2] },
          { id: 'support', label: 'Do you have emotional support?', options: ['No one', 'Few people', 'Several people', 'Strong support system'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'Good Mental Health', message: 'Your mental health is in good shape. Keep doing what you\'re doing.' };
          if (percentage >= 60) return { status: 'safe', title: 'Adequate Mental Health', message: 'Your mental health is reasonably good. Consider self-care to maintain it.' };
          if (percentage >= 40) return { status: 'warning', title: 'Mental Health Support Needed', message: 'Consider talking to a therapist or counselor. Many offer affordable or sliding-scale fees.' };
          return { status: 'danger', title: 'URGENT: Seek Mental Health Support', message: 'Your mental health needs immediate attention. Call a crisis hotline or visit a mental health clinic TODAY.' };
        }
      },
      'reproductive': {
        title: 'Reproductive Health Assessment',
        icon: 'fas fa-female',
        questions: [
          { id: 'cycles', label: 'Are your menstrual cycles regular?', options: ['Very irregular', 'Somewhat irregular', 'Mostly regular', 'Regular'], scores: [0, 1, 2, 2] },
          { id: 'pain', label: 'Do you experience menstrual or reproductive pain?', options: ['Severe', 'Moderate', 'Mild', 'None'], scores: [0, 1, 2, 2] },
          { id: 'discharge', label: 'Is your vaginal discharge normal?', options: ['Abnormal', 'Sometimes abnormal', 'Mostly normal', 'Normal'], scores: [0, 1, 2, 2] },
          { id: 'screening', label: 'Have you had reproductive cancer screening (Pap, HPV)?', options: ['Never', 'Over 5 years ago', '1-3 years ago', 'Within last year'], scores: [0, 1, 2, 2] },
          { id: 'fertility', label: 'Are you concerned about fertility?', options: ['Yes, very concerned', 'Somewhat concerned', 'Mildly concerned', 'Not concerned / N/A'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'Good Reproductive Health', message: 'Your reproductive health appears to be in good condition. Continue regular screenings.' };
          if (percentage >= 60) return { status: 'safe', title: 'Adequate Reproductive Health', message: 'Your reproductive health is OK. Schedule a check-up if you haven\'t recently.' };
          if (percentage >= 40) return { status: 'warning', title: 'Reproductive Health Check Recommended', message: 'Schedule an appointment with your gynecologist or reproductive health clinician.' };
          return { status: 'danger', title: 'URGENT: Reproductive Health Evaluation Needed', message: 'You need to see a gynecologist or reproductive health specialist soon. Call to schedule an urgent appointment.' };
        }
      },
      'emergency': {
        title: 'Emergency Symptom Screening',
        icon: 'fas fa-exclamation-circle',
        questions: [
          { id: 'chest', label: 'Do you have chest pain or difficulty breathing?', options: ['Yes, severe', 'Yes, mild', 'No', 'Not sure'], scores: [0, 0, 2, 1] },
          { id: 'bleeding', label: 'Are you experiencing abnormal bleeding?', options: ['Yes, heavy', 'Yes, moderate', 'No', 'Not applicable'], scores: [0, 1, 2, 2] },
          { id: 'fever', label: 'Do you have a high fever (101Â°F+)?', options: ['Yes, above 103Â°F', 'Yes, 101-103Â°F', 'Mild fever/No', 'No fever'], scores: [0, 1, 2, 2] },
          { id: 'pain', label: 'Do you have severe abdominal or pelvic pain?', options: ['Yes, unbearable', 'Yes, severe', 'Mild/Moderate', 'No pain'], scores: [0, 1, 2, 2] },
          { id: 'consciousness', label: 'Are you feeling faint or losing consciousness?', options: ['Yes, frequently', 'Yes, sometimes', 'Occasionally', 'No'], scores: [0, 1, 2, 2] }
        ],
        validate: (score, total) => {
          const percentage = (score / total) * 100;
          if (percentage >= 80) return { status: 'safe', title: 'No Emergency Symptoms', message: 'You don\'t appear to have emergency symptoms. Monitor yourself and seek help if symptoms develop.' };
          if (percentage >= 60) return { status: 'warning', title: 'See a Doctor Soon', message: 'You should see a doctor within 24 hours. Symptoms warrant professional evaluation.' };
          if (percentage >= 40) return { status: 'warning', title: 'Urgent Care Recommended', message: 'Visit an urgent care clinic or emergency room within a few hours.' };
          return { status: 'danger', title: 'ðŸš¨ CALL 911 / GO TO ER NOW ðŸš¨', message: 'You are experiencing emergency symptoms. CALL 911 or go to the nearest emergency room IMMEDIATELY. Do not delay!' };
        }
      }
    };

    let currentAssessment = null;

    function createAssessmentForm(formKey) {
      const data = assessmentData[formKey];
      const form = document.createElement('div');
      form.className = 'assessment-form';
      form.id = `form-${formKey}`;
      
      let html = `
        <div class="form-header">
          <i class="${data.icon}"></i>
          <h2>${data.title}</h2>
          <button onclick="resetAssessment()" type="button">âœ•</button>
        </div>
        <form class="form-questions" id="assessment-form-${formKey}">
      `;

      data.questions.forEach((q, idx) => {
        html += `
          <div class="question-group">
            <label>${idx + 1}. ${q.label}</label>
            <div class="question-options">
        `;
        q.options.forEach((opt, optIdx) => {
          const radioId = `${formKey}-${q.id}-${optIdx}`;
          html += `
            <div class="question-option">
              <input type="radio" id="${radioId}" name="${q.id}" value="${optIdx}" required />
              <label for="${radioId}">${opt}</label>
            </div>
          `;
        });
        html += `</div></div>`;
      });

      html += `
        </form>
        <div class="assessment-buttons">
          <button class="submit-assessment" onclick="submitAssessment('${formKey}')">Submit Assessment</button>
          <button class="cancel-assessment" onclick="resetAssessment()">Cancel</button>
        </div>
      `;

      form.innerHTML = html;
      return form;
    }

    function initAssessments() {
      const container = document.getElementById('assessmentFormsContainer');
      for (const key of Object.keys(assessmentData)) {
        container.appendChild(createAssessmentForm(key));
      }

      document.querySelectorAll('.assessment-card').forEach(card => {
        card.addEventListener('click', () => {
          const formKey = card.getAttribute('data-form');
          document.querySelectorAll('.assessment-form').forEach(f => f.classList.remove('active'));
          document.getElementById(`form-${formKey}`).classList.add('active');
          document.getElementById('assessmentSelector').style.display = 'none';
        });
      });
    }

    function submitAssessment(formKey) {
      const data = assessmentData[formKey];
      const form = document.getElementById(`assessment-form-${formKey}`);
      
      let score = 0;
      let total = 0;

      data.questions.forEach(q => {
        const selected = form.querySelector(`input[name="${q.id}"]:checked`);
        if (selected) {
          const optIdx = parseInt(selected.value);
          score += q.scores[optIdx];
          total += Math.max(...q.scores);
        }
      });

      const result = data.validate(score, total);
      showResult(data.title, result);
    }

    function showResult(title, result) {
      document.getElementById('assessmentSelector').style.display = 'none';
      document.querySelectorAll('.assessment-form').forEach(f => f.classList.remove('active'));
      
      const resultDiv = document.getElementById('assessmentResult');
      const iconEl = document.getElementById('resultIcon');
      const titleEl = document.getElementById('resultTitle');
      const messageEl = document.getElementById('resultMessage');
      const recsEl = document.getElementById('resultRecommendations');

      iconEl.className = `result-icon ${result.status}`;
      if (result.status === 'safe') iconEl.innerHTML = '<i class="fas fa-check-circle"></i>';
      else if (result.status === 'warning') iconEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
      else iconEl.innerHTML = '<i class="fas fa-ambulance"></i>';

      titleEl.textContent = result.title;
      messageEl.textContent = result.message;

      // Show recommendations based on status
      if (result.status === 'warning' || result.status === 'danger') {
        recsEl.style.display = 'block';
        recsEl.innerHTML = `
          <h3>Recommended Actions:</h3>
          <ul>
            <li>Schedule an appointment with a healthcare provider</li>
            <li>Discuss symptoms with a clinician</li>
            <li>Get professional medical evaluation</li>
            <li>Follow treatment recommendations</li>
          </ul>
        `;
      } else {
        recsEl.style.display = 'none';
      }

      resultDiv.classList.add('show');
    }

    function resetAssessment() {
      document.getElementById('assessmentSelector').style.display = 'grid';
      document.getElementById('assessmentResult').classList.remove('show');
      document.querySelectorAll('.assessment-form').forEach(f => f.classList.remove('active'));
    }

    function goToForum() {
      showSection('forum');
      resetAssessment();
    }

    // Initialize assessments on page load
    initAssessments();

    // ============ MODAL / INFO DETAILS ============
    const modalBackdrop = document.getElementById('modalBackdrop');
    const infoModal = document.getElementById('infoModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const closeModalBtn = document.getElementById('closeModalBtn');

    const infoDetails = {
      'safe-sex': {
        title: 'Safe Sex Practices',
        icon: 'fas fa-condom',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa safe sex
      },
      'contraception': {
        title: 'Contraception Options',
        icon: 'fas fa-pills',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa contraception
      },
      'sti': {
        title: 'STI Prevention & Testing',
        icon: 'fas fa-virus',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa STIs
      },
      'clinic': {
        title: 'Finding Clinics',
        icon: 'fas fa-hospital-alt',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa clinics
      },
      'mental': {
        title: 'Mental Health & Sexual Wellness',
        icon: 'fas fa-heart',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa mental health
      },
      'rights': {
        title: 'Rights and Privacy',
        icon: 'fas fa-gavel',
        content: ` ` // sa gitna ka maglagay ng content tungkol sa rights and privacy
      }
    };

    function openModal(key) {
      const info = infoDetails[key];
      if (!info) return;
      
      modalTitle.innerHTML = `<i class="${info.icon}"></i> ${info.title}`;
      modalContent.innerHTML = info.content;
      modalBackdrop.classList.add('show');
    }

    function closeModal() {
      modalBackdrop.classList.remove('show');
    }

    closeModalBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      if (e.target === modalBackdrop) closeModal();
    });

    // Wire info cards to open modal
    document.querySelectorAll('#info .card').forEach((card, idx) => {
      const keys = ['safe-sex', 'contraception', 'sti', 'clinic', 'mental', 'rights'];
      card.addEventListener('click', () => openModal(keys[idx]));
    });

    // Section navigation
    function showSection(sectionId) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      const section = document.getElementById(sectionId);
      if (section) section.classList.add('active');
    }

    // ============ FORUM ============
    const postsKey = 'forum_posts_v1';
    const postForm = document.getElementById('postForm');
    const authorInput = document.getElementById('authorInput');
    const messageInput = document.getElementById('messageInput');
    const postsContainer = document.getElementById('postsContainer');
    const clearAllBtn = document.getElementById('clearAllBtn');
    let posts = [];

    function loadPosts() {
      try {
        posts = JSON.parse(localStorage.getItem(postsKey) || '[]');
      } catch (e) {
        posts = [];
      }
    }

    function savePosts() {
      localStorage.setItem(postsKey, JSON.stringify(posts));
    }

    function timeAgo(iso) {
      const delta = Math.floor((Date.now() - new Date(iso)) / 1000);
      if (delta < 60) return `${delta}s`;
      if (delta < 3600) return `${Math.floor(delta / 60)}m`;
      if (delta < 86400) return `${Math.floor(delta / 3600)}h`;
      return `${Math.floor(delta / 86400)}d`;
    }

    function escapeHtml(s) {
      if (!s) return '';
      return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function renderPosts() {
      if (!posts || posts.length === 0) {
        postsContainer.innerHTML = `<div class="empty-state"><i class="fas fa-comments"></i><p>No posts yet â€” be the first to share!</p></div>`;
        return;
      }

      postsContainer.innerHTML = '';
      // Sort posts by likes (most liked first), tie-breaker: newest first
      const sorted = posts.slice().sort((a, b) => {
        const la = a.likes || 0;
        const lb = b.likes || 0;
        if (lb !== la) return lb - la;
        return new Date(b.time) - new Date(a.time);
      });

      // Display the top (most liked) post in the banner
      const top = sorted[0];
      const topEl = document.getElementById('topPost');
      if (top) {
        topEl.style.display = 'block';
        topEl.innerHTML = `
          <div class="title">Most Liked Post</div>
          <div class="top-card">
            <div class="tp-content"><strong>${escapeHtml(top.author || 'Anonymous')}</strong>: ${escapeHtml(top.content)}</div>
            <div class="tp-meta">ðŸ‘ ${top.likes || 0}<br/><small>${timeAgo(top.time)}</small></div>
          </div>
        `;
      } else {
        topEl.style.display = 'none';
        topEl.innerHTML = '';
      }

      sorted.forEach(post => {
        const el = document.createElement('div');
        el.className = 'post';
        el.innerHTML = `
          <div class="post-header">
            <div>
              <div class="post-author">${escapeHtml(post.author || 'Anonymous')}</div>
              <div class="post-time">${timeAgo(post.time)}</div>
            </div>
          </div>
          <div class="post-content">${escapeHtml(post.content)}</div>
          <div class="post-actions">
            <button class="post-action-btn" data-action="like" data-id="${post.id}"><i class="fas fa-thumbs-up"></i> ${post.likes || 0}</button>
            <button class="post-action-btn" data-action="delete" data-id="${post.id}"><i class="fas fa-trash"></i></button>
          </div>
        `;
        postsContainer.appendChild(el);
      });
    }

    postsContainer.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action]');
      if (!btn) return;
      const action = btn.getAttribute('data-action');
      const id = btn.getAttribute('data-id');
      if (action === 'like') {
        const p = posts.find(x => x.id === id);
        if (p) {
          p.likes = (p.likes || 0) + 1;
          savePosts();
          renderPosts();
        }
      } else if (action === 'delete') {
        if (!confirm('Delete this post?')) return;
        posts = posts.filter(x => x.id !== id);
        savePosts();
        renderPosts();
      }
    });

    postForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const author = authorInput.value;
      const content = messageInput.value;
      if (!content || !content.trim()) {
        alert('Please enter a message before posting.');
        return;
      }
      const post = {
        id: Date.now().toString(36) + Math.random().toString(36).slice(2, 7),
        author: author ? author.trim() : 'Anonymous',
        content: content.trim(),
        likes: 0,
        time: new Date().toISOString()
      };
      posts.push(post);
      savePosts();
      renderPosts();
      postForm.reset();
    });

    clearAllBtn.addEventListener('click', () => {
      if (!posts || posts.length === 0) return;
      if (!confirm('Clear all posts? This cannot be undone.')) return;
      posts = [];
      savePosts();
      renderPosts();
    });

    loadPosts();

    // Seed 45 sample posts (only once) and persist. Uses a flag in localStorage to avoid duplicating.
    if (!localStorage.getItem('forum_seeded_v2')) {
      const seed = [];
      const snippets = [
        'Condoms are important â€” always use one when unsure.',
        'Just got tested and the clinic was friendly and confidential.',
        'Any tips for discussing contraception with a new partner?',
        'IUD experience: minimal pain, now I don\'t worry about pills.',
        'Remember emergency contraception works best the sooner you take it.',
        'Testing helped me feel more confident in my relationship.',
        'Where do you find low-cost STI testing near you?',
        'Has anyone tried the implant? How was recovery?',
        'Talking about consent is crucial â€” be direct and kind.',
        'Plan B was accessible at my local pharmacy, no questions asked.'
      ];

      for (let i = 0; i < 45; i++) {
        const id = 'sample-' + Date.now().toString(36) + '-' + i;
        const author = `User${100 + i}`;
        const content = snippets[i % snippets.length] + (i % 3 === 0 ? ' Sharing my experience.' : ' Asking for advice.');
        const likes = Math.floor(Math.random() * 120); // 0-119 likes
        const time = new Date(Date.now() - (i * 60 * 60 * 1000)).toISOString();
        seed.push({ id, author, content, likes, time });
      }

      posts = posts.concat(seed);
      savePosts();
      localStorage.setItem('forum_seeded_v2', '1');
    }

    renderPosts();
    const chatPanel = document.getElementById('chatPanel');
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const minimizeChat = document.getElementById('minimizeChat');
    const quickReplies = document.getElementById('quickReplies');
    const chatBubble = document.getElementById('chatBubble');

    const chatKey = 'chat_history_v1';
    let chatHistory = [];

    const canned = [
      { pattern: /\bhello\b|\bhi\b|\bhey\b/, reply: "Hello! I'm HealthBot. I can answer questions about safe sex, contraception, clinics, and more." },
      { pattern: /\bhelp\b/, reply: 'Try: "safe sex", "contraception", "clinic", "STI", "emergency", or "self assessment".' },
      { pattern: /\bsafe sex\b|\bcondom(s)?\b/, reply: 'Safe sex means using protection (condoms), getting tested regularly, communicating with partners, and using contraception consistently.' },
      { pattern: /contraception|birth control|pill|iud|implant/, reply: "Options include pills, IUDs, implants, condoms, and more. Talk to a clinician to find what's right for you." },
      { pattern: /clinic|near me|where to (find|get)/, reply: "Search online for sexual health clinics near you. Many offer confidential and affordable services. If it's urgent, go to the ER." },
      { pattern: /sti|testing|test(ed)?/, reply: "STI testing is important if you're sexually active. Many STIs are treatable. Get tested annually or after unprotected contact." },
      { pattern: /emergency|urgent|help now/, reply: "If it's an emergency, call your local emergency number or go to the nearest hospital immediately." },
      { pattern: /self assessment|assessment|checklist/, reply: "Check out the Self-Assessment section in the navigation to use our checklists." },
      { pattern: /mental|therapy|counsel/, reply: "Sexual health includes mental well-being. Don't hesitate to seek therapy or counseling if needed." }
    ];

    const defaultReply = "I'm not sure about that. Try asking about safe sex, contraception, clinics, STI testing, or use a quick reply.";

    function saveChat() {
      try { localStorage.setItem(chatKey, JSON.stringify(chatHistory)); } catch (e) {}
    }

    function loadChat() {
      try { chatHistory = JSON.parse(localStorage.getItem(chatKey) || '[]'); } catch (e) { chatHistory = []; }
    }

    function renderHistory() {
      chatMessages.innerHTML = '';
      chatHistory.forEach(m => {
        const el = document.createElement('div');
        el.className = `message ${m.who}`;
        el.textContent = m.text;
        chatMessages.appendChild(el);
      });
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function addMessage(text, who = 'bot', save = true) {
      const el = document.createElement('div');
      el.className = `message ${who}`;
      el.textContent = text;
      chatMessages.appendChild(el);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      if (save) {
        chatHistory.push({ who, text, time: new Date().toISOString() });
        saveChat();
      }
    }

    function showTyping(on = true) {
      let typingEl = chatMessages.querySelector('.typing');
      if (on) {
        if (!typingEl) {
          typingEl = document.createElement('div');
          typingEl.className = 'message bot typing';
          typingEl.textContent = 'HealthBot is typing...';
          chatMessages.appendChild(typingEl);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }
      } else {
        if (typingEl) typingEl.remove();
      }
    }

    function respondTo(text) {
      const t = text.toLowerCase();
      for (const item of canned) {
        if (item.pattern.test(t)) return item.reply;
      }
      return defaultReply;
    }

    function openChat() {
      chatPanel.classList.remove('hidden');
      loadChat();
      renderHistory();
      if (chatHistory.length === 0) {
        addMessage("Hi! I'm HealthBot. I can answer questions about sexual health, contraception, clinics, and more. What can I help with?", 'bot');
      }
      renderQuickReplies();
      chatInput.focus();
    }

    function closeChat() {
      chatPanel.classList.add('hidden');
    }

    function handleSend() {
      const txt = chatInput.value && chatInput.value.trim();
      if (!txt) return;
      addMessage(txt, 'user');
      chatInput.value = '';
      showTyping(true);
      // Simulate thinking time
      setTimeout(() => {
        const reply = respondTo(txt);
        showTyping(false);
        addMessage(reply, 'bot');
      }, 600 + Math.random() * 600);
    }

    function renderQuickReplies() {
      const quickList = [
        { label: 'Hello', value: 'hello' },
        { label: 'Safe sex tips', value: 'safe sex' },
        { label: 'Contraception', value: 'contraception' },
        { label: 'Find a clinic', value: 'clinic' },
        { label: 'STI testing', value: 'sti' }
      ];

      quickReplies.innerHTML = '';
      quickList.forEach(q => {
        const b = document.createElement('button');
        b.type = 'button';
        b.textContent = q.label;
        b.addEventListener('click', () => {
          addMessage(q.label, 'user');
          showTyping(true);
          setTimeout(() => { showTyping(false); addMessage(respondTo(q.value), 'bot'); }, 300 + Math.random() * 400);
        });
        quickReplies.appendChild(b);
      });
    }

    sendBtn.addEventListener('click', handleSend);
    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        handleSend();
      }
    });

    minimizeChat.addEventListener('click', closeChat);

    chatBubble.addEventListener('click', () => {
      if (chatPanel.classList.contains('hidden')) openChat();
      else closeChat();
    });
  </script>
</body>
</html>










